# 1ã€å‰è¨€
ç›¸ä¿¡å„ä½å°ä¼™ä¼´åœ¨å†™çˆ¬è™«çš„æ—¶å€™ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä¸€äº›éœ€è¦æºå¸¦çš„å‚æ•°ä¸€ç›´åœ¨å˜åŒ–ï¼Œä»Šå¤©é€†å‘çš„è¿™ä¸ªç½‘ç«™[æŸé“ç¿»è¯‘](https://fanyi.youdao.com/index.html#/)ä¹Ÿå¦‚æ­¤ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/e346efd1c78d48af885b3839d6f11d61.png)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/c4d240d9d25e410ba7417d99314f407e.png)
å¯ä»¥å‘ç°å˜çš„å°±ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ª signï¼Œä¸€ä¸ªæ˜¯ mysticTimeï¼ŒmysticTime ä¸€çœ‹å°±æ˜¯æ—¶é—´æˆ³ï¼Œæ‰€ä»¥åªè¦é€†å‘ sign å‚æ•°å°±è¡Œäº†ã€‚




# 2ã€æ­¥éª¤

å¯ä»¥ç›´æ¥å…¨å±€æœç´¢ `signï¼š`ï¼ŒåŠ ä¸€ä¸ªå†’å·å¯èƒ½å¥½æœä¸€ç‚¹ã€‚æœç´¢è¿”å›çš„ç»“æœæ¯”è¾ƒå°‘ï¼Œå¤šçš„è¯å°±æ¯ä¸ªsignéƒ½æ‰“ä¸Šæ–­ç‚¹ï¼Œç‚¹å‡»ç¿»è¯‘çœ‹çœ‹åœåœ¨å“ªé‡Œã€‚å¦‚æœå®åœ¨æ˜¯å¤ªå¤šäº†ï¼Œå°±é‡‡ç”¨è·Ÿæ ˆçš„æ–¹æ³•ï¼Œå‡†ç¡®æ— è¯¯ï¼Œæ…¢æ…¢çš„ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº† sign çš„ä½ç½®ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/becfa083dbc44053885854c2b9933145.png)

t æ˜¯ä¸ªæ—¶é—´æˆ³ï¼Œæ–¹æ³•å°±æ˜¯ `(new Date).getTime()`ã€‚e æ˜¯ä¸ªå›ºå®šå€¼ `"fsdsogkndfokasodnaso"`ï¼Œh å‡½æ•°ä¼ å…¥äº† t å’Œ e åå°±ç”Ÿæˆäº† signï¼Œè¿›å…¥ h å‡½æ•°ï¼Œå‘ç°å°±åœ¨ä¸Šé¢ã€‚è€Œ d å’Œ u è¿™ä¸¤ä¸ªå‚æ•°ä¹Ÿæ˜¯å›ºå®šçš„ã€‚å¹¶ä¸” h å‡½æ•°é‡Œé¢æœ‰è°ƒç”¨äº†ä¸€ä¸ª v å‡½æ•°ï¼Œè¿›å…¥ v å‡½æ•°ï¼ŒåŸæ¥ v å‡½æ•°ä¹Ÿåœ¨ä¸Šé¢ã€‚è¿™ v å‡½æ•°å¤ªç†Ÿæ‚‰äº†å•Šï¼Œæ ‡å‡†çš„ MD5 åŠ å¯†ã€‚

æ•´ç†ä¸€ä¸‹å®Œæ•´çš„ js ä»£ç å°±å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/a68e80584c7d42f081517621aefb9ce7.png)

æµ‹è¯•å®Œæ²¡é—®é¢˜åï¼Œå°±å¯ä»¥å°è£…ä¸º Python è¿›è¡Œè¯·æ±‚äº†ï¼Œå¦‚ä¸‹å›¾ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/846a2a068f03408696ac67314301b1b0.png)

ç°åœ¨å¯ä»¥å¼€å§‹ç¼–å†™çˆ¬è™«ç¨‹åºï¼Œå†™å®Œè¿è¡Œä¸€ä¸‹ï¼Œå‘ç°è¿”å›çš„ä¸æ˜¯ç¿»è¯‘åçš„å†…å®¹ï¼Œè€Œæ˜¯ä¸€ä¸²å­—ç¬¦ï¼Œé‚£å°±éœ€è¦æˆ‘ä»¬æ¥è§£å¯†ä¸€ä¸‹äº†ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/989464c3212343e1ad159c46031d5fa6.png)
æˆ‘ä»¬ç”¨è·Ÿæ ˆçš„æ–¹æ³•çœ‹å¯†æ–‡åœ¨å“ªé‡Œå‡ºç°çš„å’Œåœ¨å“ªé‡Œå‘ç”Ÿäº†å˜åŒ–ï¼Œä¸€æ­¥ä¸€æ­¥å¾€ä¸‹è·Ÿï¼Œæœ€å…ˆè°ƒç”¨çš„å‡½æ•°æ”¾åœ¨æœ€ä¸‹é¢ï¼Œæˆ‘ä»¬åªéœ€è¦è·Ÿåˆ°æ˜æ–‡å‡ºç°çš„é‚£ä¸€åˆ»å°±è¡Œäº†ã€‚

æˆ‘ä»¬å…ˆå¤åˆ¶è¯·æ±‚çš„ URLï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/8009cc33f5a94be9ac634b1272870c63.png)

åˆ‡æ¢åˆ°æºä»£ç ï¼Œåœ¨XHR/æå–æ–­ç‚¹æŠŠåˆšæ‰å¤åˆ¶çš„ç½‘å€åŠ ä¸Šå»ï¼Œé‡æ–°ç‚¹ä¸€ä¸‹ç¿»è¯‘

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/ff53a79c66d041ea8f1d87cd8ce11b18.png)
å¯ä»¥çœ‹åˆ°è¿™ä¸ª send å°±æ˜¯å‘è¯·æ±‚ï¼Œç°åœ¨ä¸»è¦è¦æ‰¾è¿”å›çš„æ•°æ®ï¼Œæˆ‘ä»¬ä¸€æ­¥æ­¥è¿›å…¥ä¸‹ä¸€ä¸ªå‡½æ•°è°ƒç”¨çœ‹çœ‹

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/63e13937b4cc4e77b7cef40d65a859ad.png)
ä¸è¿‡ä¸€ä¼šå’±ä»¬å¯ä»¥çœ‹è§ï¼Œå’±ä»¬åˆšæ‰çˆ¬è™«è¯·æ±‚è¿”å›çš„å­—ç¬¦å‡ºç°äº†ï¼Œæ¥ä¸‹æ¥å’±ä»¬è¦æ³¨æ„çœ‹äº†ï¼Œå› ä¸ºè¦å¼€å§‹å¤„ç†è¿™ä¸ªè¿”å›çš„å­—ç¬¦ä¸²

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/03fd90653c50437995f2aa750bd22ed5.png)
è·Ÿåˆ°è¿™è¾¹çš„è¯ï¼Œå¯ä»¥å‘ç°åœ¨è¿™å­—ç¬¦ä¸²æˆåŠŸç¿»è¯‘å‡ºæ¥äº†ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/8c67f892cfef4c3487d60de24eb251e2.png)

å¯ä»¥çœ‹åˆ°èµ·ä½œç”¨çš„æ˜¯è¿™ä¸ª `decodeData` ï¼Œæˆ‘ä»¬è¿›å…¥é‚£ä¸ª js æ–‡ä»¶

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/2a1485fa866c4acb9e208e17c3589af5.png)
æŠŠå…¶ä»–æ–­ç‚¹å–æ¶ˆï¼Œè¿™è¾¹æ‰“ä¸Šæ–­ç‚¹ï¼Œé‡æ–°ç¿»è¯‘ä¸€ä¸‹ï¼Œä¸€æ­¥ä¸€æ­¥å¾€ä¸‹è·Ÿï¼Œæˆ‘ä»¬åªéœ€è¦è·Ÿåˆ°æ˜æ–‡å‡ºç°çš„é‚£ä¸€åˆ»å°±è¡Œäº†ã€‚
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/4b04d41e38c74662b707c7590a5e1553.png)
åˆ° t çš„æ—¶å€™è¿˜æ˜¯ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œç»§ç»­å¾€ä¸‹èµ°
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/393e83a532b24180bdeef038b068eaf2.png)
å¯ä»¥çœ‹åˆ°åˆ° s çš„æ—¶å€™å·²ç»ç¿»è¯‘å‡ºæ¥äº†

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/9c2422c0c658415d81c5d375f619ead3.png)
æˆ‘ä»¬æŠŠä»£ç æ‰£ä¸‹æ¥æ”¾åˆ° js æ–‡ä»¶ä¸­å»æ‰§è¡Œåº”è¯¥å°±å·®ä¸å¤šäº†
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/703c096f0f7b45b9a1140ffabe62fdba.png)
çœ‹åˆ°äº† r.a.createDecipherivï¼Œå°±å¯ä»¥ç”¨ node ä¸­å†…ç½®çš„åŠ å¯†åº“ crypto åº“å»æ‰§è¡Œï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç¡¬æ‰£ï¼Œå°±æ˜¯æœ‰ç‚¹è´¹æ—¶é—´ï¼Œè€Œä¸”è¿˜å¯èƒ½å‡ºç°å„ç§æŠ¥é”™ã€‚

è¿è¡ŒæŠ¥é”™ç¼º g ï¼Œå»ä»£ç å†æŠ å‡ºæ¥ï¼Œè®°å¾— `r.a.createHash("md5").update(e).digest()` æ”¹ä¸º node ä¸­å†…ç½®çš„åŠ å¯†åº“ crypto åº“ï¼š
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/d9de50f076084aaf97b3f1f7cb12fa9b.png)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/af4951439a16414d8621b06d388dea0b.png)

è¿è¡ŒæŠ¥é”™ç¼ºäº† o ï¼Œç›´æ¥æŠŠ o å¤åˆ¶è¿›æ¥ï¼Œ
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/0ecfdd7119f94873b6532bd09c820060.png)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/7831c69949b443f690268ca52495177d.png)

å†æ¬¡è¿è¡ŒæŠ¥é”™æ²¡æœ‰ e.alloc å‡½æ•° ï¼Œè¿™å°±éœ€è¦è¡¥å……ä¸€ç‚¹ node.js çš„ç›¸å…³çŸ¥è¯†äº†ï¼š

>é€†å‘æ”¹å†™çŸ¥è¯†è¡¥å……ä¹‹ Node.js 
>Buffer.alloc() æ–¹æ³•ï¼šç”¨äºåˆ›å»ºæŒ‡å®šå¤§å°çš„æ–°ç¼“å†²åŒºå¯¹è±¡ã€‚
>æ­¤æ–¹æ³•æ¯” Buffer.alloconsafe() æ–¹æ³•æ…¢ï¼Œä½†å®ƒç¡®ä¿æ–°åˆ›å»ºçš„ Buffer å®ä¾‹æ°¸è¿œä¸ä¼šåŒ…å«å¯èƒ½æ•æ„Ÿçš„æ—§ä¿¡æ¯æˆ–æ•°æ®ã€‚
>è¯­æ³•ï¼šBuffer.alloc(size, fill, encoding)
>å‚æ•°ä¸‰ä¸ªå‚æ•°ï¼š
>- å¤§å°ï¼šæŒ‡å®šç¼“å†²åŒºçš„å¤§å°ã€‚
>- å¡«å……ï¼šä¸ºå¯é€‰å‚æ•°ï¼ŒæŒ‡å®šå¡«å……ç¼“å†²åŒºçš„å€¼ã€‚å…¶é»˜è®¤å€¼ä¸º 0ã€‚
>- ç¼–ç ï¼šå¦‚æœç¼“å†²åŒºå€¼æ˜¯å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯æŒ‡å®šå€¼çš„å¯é€‰å‚æ•°ã€‚å…¶é»˜è®¤å€¼ä¸ºâ€˜utf8â€™ã€‚
>
>è¿”å›å€¼:
>- è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„æŒ‡å®šå¤§å°çš„åˆå§‹åŒ–ç¼“å†²åŒºã€‚
>- å¦‚æœç»™å®šçš„å¤§å°ä¸æ˜¯æ•°å­—ï¼Œå°†å¼•å‘ç±»å‹é”™è¯¯ã€‚

æ•…æˆ‘ä»¬åªéœ€è¦ä¿®æ”¹ js ä»£ç ä¸ºå¦‚ä¸‹ï¼š

```javascript
function data(t) {
    // const a = e.alloc(16, g(o))
    //     , c = e.alloc(16, g(n))
    const a = Buffer.alloc(16, g(o))
        , c = Buffer.alloc(16, g(n))
        , i = crypto.createDecipheriv("aes-128-cbc", a, c);
    //, i = r.a.createDecipheriv("aes-128-cbc", a, c);
    let s = i.update(t, "base64", "utf-8");
    return s += i.final("utf-8"),
        s
}
```
å†æ¬¡è¿è¡Œï¼Œç¼ºå°‘ n ï¼Œè¿”å›å¤åˆ¶è¡¥åˆ° js ä»£ç ä¸­ï¼š
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/249c6b68c6ef4e84840ff50f01a31088.png)
æœ€åå’±ä»¬çš„ js ä»£ç å¦‚ä¸‹ï¼Œæµ‹è¯•ä¹‹åï¼Œç¡®å®æ²¡æœ‰é—®é¢˜ï¼Œç›´æ¥ç”¨ Python å°è£…èµ·æ¥ï¼š

```javascript
const crypto = require('crypto')
const o = 'ydsecret://query/key/B*RGygVywfNBwpmBaZg*WT7SIOUP2T0C9WHMZN39j^DAdaZhAnxvGcCY6VYFwnHl';
const n = 'ydsecret://query/iv/C@lZe2YzHtZ2CYgaXKSVfsb7Y4QWHjITPPZ0nQp87fBeJ!Iv6v^6fvi2WN@bYpJ4';

function data(t) {
    const a = Buffer.alloc(16, g(o))
        , c = Buffer.alloc(16, g(n))
        , i = crypto.createDecipheriv("aes-128-cbc", a, c);
    //, i = r.a.createDecipheriv("aes-128-cbc", a, c);
    let s = i.update(t, "base64", "utf-8");
    return s += i.final("utf-8"),
        s
}

function g(e) {
    return crypto.createHash("md5").update(e).digest()
    // r.a.createHash("md5").update(e).digest()
}


text = 'Z21kD9ZK1ke6ugku2ccWu4n6eLnvoDT0YgGi0y3g-v0B9sYqg8L9D6UERNozYOHqnYdl2efZNyM6Trc_xS-zKtfTK4hb6JP8XwCzNh0avc8qItQUiIU_4wKKXJlIpvMvfKvJaaZzaX6VEtpkr2FdkfoT_Jgbm2GRSVj3r40autIdlImENG8hC0ZH4ww7utwuTt3Oo_ZpXg0BSq9wePSAB75-ChkiGKF9HTIPeCl2bl84SBD1XDfFCZpkKQhecYSs0JLoXOqP2ltavxRrg58Hp1q5uIgZZ_Oo2-Jmd-t1r4es40drcAq5bjmS62M2VJF8D6ojtOh9JTfNwgzD3CxYn-Pd7-TgHMyNEJEkFXTAyxzpjlFqtrCYDE3SZUYlENkqsL8Wrra1hM-1nTfiB-BLcWAdRBynNpP5_54aq_-GBsq8bB_9yEX5ovzDB4_Ry_spVVuUnb39iplMHCdCnjOD3ngiIDbl9SUz-9npjBX05ZYRdPmFPAl424qdoaxeVqnVoH8jQFPZVqaHMzu4mJg0SICDWFH7GP1zqGRbXd3ESjT_iBInl3gICt2XVuhh_nubcELkTEC6xbqEDRQkPUNMpzXJHjcvsLHtcmSW0S9F0445ho9kT2qZYdMBC3Fs0OaHpUtFu77gZpQn7sGiqh8VliXIcUtfvvop-1c-Vu5QjfUbLn2-s5POR9fGYG6rt6ioe_PGmwWj-Cc00zUM7FybfarKTr4D3Rk57R72qpXN4Ja86ZsCAMmDG-m5z31RQh_V7echJ8Kna3Go3yWKCK4vtSwOWrFhiS5RTz6EkrGc3SkFKbb5vp8Wop_84myBtgnBmj4CczhTq2HcOxrJf4def6yDt2uBxyv4bTVGx9Yx3uB4Gx0iK5kYvfma6B_LnkRWk331wjuXKQtBGYIuWkR8J5QtvBmIRVaa7AA19Z4xMIEAqbcuQ5p4I9FCElthBrJd9YOcouHK4U27xxYWJJXcJoTvzG7zWtiV76fHDeQLgAWvJJ7ww4NFgjhqc6AKA_2afxa4c_lAvVZgFuKL3XSCL7PfKxp6GhjcGKeSRr80PT1gfFw2xi8X4ejjNm_prsUZ\n'
console.log(data(text))
```

ç”¨ json.loads è§£æä¸€ä¸‹è§£å¯†åçš„æ•°æ®ï¼Œå³å¯è·å–ç¿»è¯‘çš„æ­£æ–‡ï¼Œ

```python
def get_explain_data(data):
    with open('./youdao.js', 'r', encoding='utf-8') as file:
        result = file.read()
        context1 = execjs.compile(result)
        explain_data = context1.call('data', data)
    explain_data = json.loads(explain_data)
    eng = explain_data['translateResult'][0][0]['tgt']
    return eng
```
æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/c55c408e6bcd4af2ba934431c44b3bba.png)
# 3ã€å·å¤–
å¦‚æœæˆ‘çš„åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ã€å¦‚æœä½ å–œæ¬¢æˆ‘çš„åšå®¢å†…å®¹ï¼Œè¯· â€œğŸ‘ç‚¹èµâ€ â€œâœï¸è¯„è®ºâ€ â€œğŸ’™æ”¶è—â€ ä¸€é”®ä¸‰è¿å“¦ï¼
ã€ğŸ‘‡ğŸ»ğŸ‘‡ğŸ»ğŸ‘‡ğŸ»å…³æ³¨æˆ‘| è·å–æ›´å¤šæºç  | å®šåˆ¶æºç ã€‘å¤§å­¦ç”Ÿæ¯•è®¾æ¨¡æ¿ã€æœŸæœ«å¤§ä½œä¸šæ¨¡æ¿ ã€Echartså¤§æ•°æ®å¯è§†åŒ–ã€çˆ¬è™«é€†å‘ç­‰! ã€Œä¸€èµ·æ¢è®¨ ï¼Œäº’ç›¸å­¦ä¹ ã€ï¼ï¼ˆvxï¼špython812146ï¼‰
ä»¥ä¸Šå†…å®¹æŠ€æœ¯ç›¸å…³é—®é¢˜ğŸ˜ˆæ¬¢è¿ä¸€èµ·äº¤æµå­¦ä¹ ğŸ‘‡ğŸ»ğŸ‘‡ğŸ»ğŸ‘‡ğŸ»ğŸ”¥
